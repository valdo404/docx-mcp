# docx-mcp Environment Configuration
# Copy this file to .env and fill in the values

# =============================================================================
# TRANSPORT MODE
# =============================================================================
# "stdio" for traditional MCP (local clients like Claude Desktop)
# "sse" or "http" for cloud deployment (Koyeb, etc.)
DOCX_MCP_TRANSPORT=stdio

# =============================================================================
# STORAGE PROVIDER
# =============================================================================
# "local" - Local filesystem (default, good for development and Docker volumes)
# "gcs" - Google Cloud Storage (recommended for Koyeb/cloud)
DOCX_MCP_STORAGE_PROVIDER=local

# Local storage path (used when DOCX_MCP_STORAGE_PROVIDER=local)
# Defaults to ~/.docx-mcp/sessions if not set
DOCX_MCP_SESSIONS_DIR=

# =============================================================================
# GOOGLE CLOUD STORAGE (when DOCX_MCP_STORAGE_PROVIDER=gcs)
# =============================================================================
# GCS bucket name (required)
GCS_BUCKET=my-docx-mcp-bucket

# Object prefix for all stored files
GCS_PREFIX=docx-mcp/sessions/

# Path to service account JSON (optional if using workload identity/ADC)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# =============================================================================
# OAUTH / MICROSOFT ENTRA ID
# =============================================================================
# Azure AD tenant ID
# Use "common" for multi-tenant, or a specific tenant GUID
AZURE_TENANT_ID=common

# Application (client) ID from Azure AD app registration
AZURE_CLIENT_ID=

# Client secret (for confidential client flow)
AZURE_CLIENT_SECRET=

# Base URL for this service (used for OAuth redirect URI)
# In production, this should be your public URL
DOCX_MCP_BASE_URL=http://localhost:8080

# Set to "false" to disable token validation (development only!)
DOCX_MCP_VALIDATE_TOKENS=true

# =============================================================================
# HTTP SERVER (when running in SSE mode)
# =============================================================================
# Port to listen on (Koyeb sets PORT automatically)
PORT=8080

# CORS allowed origins (comma-separated, or "*" for all)
DOCX_MCP_CORS_ORIGINS=*

# =============================================================================
# SESSION MANAGEMENT
# =============================================================================
# Checkpoint interval (create snapshot every N edits)
DOCX_MCP_CHECKPOINT_INTERVAL=10

# WAL compaction threshold (compact when WAL exceeds N entries)
DOCX_MCP_WAL_COMPACT_THRESHOLD=50

# Session max age in days (auto-cleanup stale sessions)
DOCX_MCP_SESSION_MAX_AGE_DAYS=7
